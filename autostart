#!/bin/bash
echo ""
echo "→ Porządek lokalny"
echo ""
sudo apt update -y && sudo apt upgrade -y
sudo apt autoclean -y
sudo apt autoremove -y
sudo apt dist-upgrade -y
echo ""
echo "→ Instalowanie potrzebnego oprogramowania. Na wszystkie pytania odpowiadasz WCISKANIEM ENTER"
echo ""
sudo apt install -y htop net-tools openssh-server sshfs proftpd espeak geany git python python-pip python-smbus python3-dev python3-venv python3-pip python3-smbus apache2 php mysql-server mysql-common mysql-client phpmyadmin mplayer
echo ""
echo "→ Restart apache2 mysql, żeby zapamiętały zmiany."
echo ""
sudo service apache2 restart
sudo service mysql restart
echo ""
echo "→ Instalowanie wirtualnego środowiska Pythona"
echo ""
sudo pip3 install virtualenv
virtualenv /home/$USER/pythonenv
echo ""
echo "→ Instalowanie pakietów Pythona"
echo ""
pip install requests
echo ""
echo "→ Instalowanie mps-youtube"
echo ""
pip3 install mps-youtube youtube-dl
git clone https://github.com/mps-youtube/mps-youtube
sudo cp mps-youtube/mpsyt	/usr/bin
rm -R -f mps-youtube
echo ""
echo "→ Instalowanie programów pomocniczych DomoBota"
echo ""
sudo cp bin/gad				/usr/bin
sudo cp bin/ziz				/usr/bin
sudo cp bin/gpio/dht11		/usr/bin
sudo cp bin/gpio/lcd		/usr/bin
sudo cp bin/pogoda			/usr/bin
sudo cp bin/gpio/domofon	/usr/bin
sudo cp bin/domobot			/usr/bin
sudo cp bin/autogit			/usr/bin
echo ""
echo "→Instalowanie DomoBot GUI"
echo ""
sudo cp -r www/* /var/www/html/domobot/		#musi być ta gwiazdka, bo inaczej kopiuje do www
echo "→ Jeśli to pierwsza instalacja lub robisz kompletny reinstall, to musisz skonfigurować dostęp do bazy danych i/lub dostęp do API."
echo "→ Wpisz: ./configureDB dla bazy danych; ./configureDAPI dla API; ./configure dla obu na raz"

